---
- name: print control hostname
  hosts: localhost
  connection: local
  tasks:
    - debug: var=ansible_all_ipv4_addresses
    - debug: var=ansible_default_ipv4.address
  
- name: Play to setup infrastructure on OpenStack 
  hosts: localhost
  connection: local

  roles:
    - role: create-instance
      vars:
        guid: 3365
        instances:
          - name: frontend1
            image: rhel-8.3
            flavor: "GLOBAL-CPU_4_Memory_8192_Disk_30_flavor"
            keypair: "{{ guid }}-keypair"
            security_group: "{{ guid }}-HostSG"
            internal_network: "{{ guid }}-dev-network"
            metadata:
              AnsibleGroup: osp_instances_lab
              deployment_name: dev
